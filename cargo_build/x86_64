FROM ubuntu:22.04

RUN apt update && apt upgrade -y
RUN apt install -y curl
RUN curl https://sh.rustup.rs -sSf | sh -s -- -y

ENV PATH=$PATH:/root/.cargo/bin

RUN rustup toolchain install nightly
RUN rustup target add x86_64-unknown-linux-gnu

RUN apt install -y g++

WORKDIR /metachain

CMD ["cargo", "+nightly", "build", "--target", "x86_64-unknown-linux-gnu"]